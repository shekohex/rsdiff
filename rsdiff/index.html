<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `rsdiff` crate."><meta name="keywords" content="rust, rustlang, rust-lang, rsdiff"><title>rsdiff - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../rsdiff/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate rsdiff</p><div class='block version'><p>Version 0.1.0</p></div><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all rsdiff's items</p></a><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'rsdiff', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/rsdiff/lib.rs.html#1-279' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>rsdiff</a></span></h1><div class='docblock'><h2 id="rsdiff1" class="section-header"><a href="#rsdiff1">rsdiff(1).</a></h2>
<p>A simple implementation of <a href="https://linux.die.net/man/1/rdiff"><code>rdiff(1)</code></a>.</p>
<p>this not really a 1:1 <code>rdiff(1)</code> implementation, it has the same concepts like generating a
signature of a given buffer and then calculating the delta between the original buffer and a
modified one with onenly the signature.</p>
<p>patching is implemented, but not ready yet!</p>
<p>here is a simple examples of how it works.</p>
<h3 id="examples" class="section-header"><a href="#examples">Examples:</a></h3>
<ol>
<li>Simple:</li>
</ol>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rsdiff</span>::<span class="ident">Operation</span>;

<span class="comment">// imagine we have this simple file contains this small text.</span>
<span class="kw">let</span> <span class="ident">original</span> <span class="op">=</span> <span class="string">&quot;i saw a red fox&quot;</span>;
<span class="comment">// now we will make a small edit to it.</span>
<span class="kw">let</span> <span class="ident">new</span> <span class="op">=</span> <span class="string">&quot;i saw a red box&quot;</span>;
<span class="comment">// in this example we tell it to use 4 bytes as a block size.</span>
<span class="kw">let</span> <span class="ident">ops</span> <span class="op">=</span> <span class="ident">rsdiff</span>::<span class="ident">diff_with_block_size</span>(<span class="number">4</span>, <span class="ident">original</span>, <span class="ident">new</span>);
<span class="kw">for</span> <span class="ident">op</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="ident">ops</span> {
 <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">op</span>);
}
<span class="comment">// prints</span>
<span class="comment">// + 12..15 = &quot;box&quot;</span>
<span class="comment">// - 15..-3</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">ops</span>,
    <span class="macro">vec</span><span class="macro">!</span>[
        <span class="comment">// insert the word &quot;box&quot; starting from 12 index.</span>
        <span class="ident">Operation</span>::<span class="ident">Insert</span> { <span class="ident">offset</span>: <span class="number">12</span>, <span class="ident">buffer</span>: <span class="string">b&quot;box&quot;</span>.<span class="ident">to_vec</span>() },
        <span class="comment">// from the index 15 remove 3 bytes (backword)</span>
        <span class="comment">// it is like if you are remving text with backspace!</span>
        <span class="comment">// or you can imagine it as how many bytes I need to skip from the buffer.</span>
        <span class="ident">Operation</span>::<span class="ident">Remove</span> { <span class="ident">offset</span>: <span class="number">15</span>, <span class="ident">len</span>: <span class="number">3</span> },
    ],
);
</pre></div>
<ol start="2">
<li>Insert &amp; Remove.</li>
</ol>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rsdiff</span>::<span class="ident">Operation</span>;

<span class="kw">let</span> <span class="ident">original</span> <span class="op">=</span> <span class="string">&quot;hello there, do you know rust?&quot;</span>;
<span class="kw">let</span> <span class="ident">new</span> <span class="op">=</span> <span class="string">&quot;hi, do you know about rustlang?&quot;</span>;
<span class="kw">let</span> <span class="ident">ops</span> <span class="op">=</span> <span class="ident">rsdiff</span>::<span class="ident">diff_with_block_size</span>(<span class="number">5</span>, <span class="ident">original</span>, <span class="ident">new</span>);

<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">ops</span>,
    <span class="macro">vec</span><span class="macro">!</span>[
        <span class="comment">// add &quot;hi, do&quot; from offset 0 to 6.</span>
        <span class="ident">Operation</span>::<span class="ident">Insert</span> { <span class="ident">offset</span>: <span class="number">0</span>, <span class="ident">buffer</span>: <span class="string">b&quot;hi, do&quot;</span>.<span class="ident">to_vec</span>() },
        <span class="comment">// from 6 skip 15 bytes (&quot;hello there, &quot;).</span>
        <span class="ident">Operation</span>::<span class="ident">Remove</span> { <span class="ident">offset</span>: <span class="number">6</span>, <span class="ident">len</span>: <span class="number">15</span> },
        <span class="comment">// at 16 add &quot;about rustlang?&quot;.</span>
        <span class="ident">Operation</span>::<span class="ident">Insert</span> { <span class="ident">offset</span>: <span class="number">16</span>, <span class="ident">buffer</span>: <span class="string">b&quot;about rustlang?&quot;</span>.<span class="ident">to_vec</span>() },
        <span class="comment">// remove 5 bytes (&quot;rust?&quot;).</span>
        <span class="ident">Operation</span>::<span class="ident">Remove</span> { <span class="ident">offset</span>: <span class="number">31</span>, <span class="ident">len</span>: <span class="number">5</span> },
    ],
);
</pre></div>
<ol start="3">
<li>Raw API.</li>
</ol>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rsdiff</span>::{<span class="ident">Signature</span>, <span class="ident">Delta</span>, <span class="ident">Operation</span>};

<span class="comment">// imagine we have this simple file contains this small text.</span>
<span class="kw">let</span> <span class="ident">original</span> <span class="op">=</span> <span class="string">&quot;i saw a red fox&quot;</span>;
<span class="comment">// now we will make a small edit to it.</span>
<span class="kw">let</span> <span class="ident">new</span> <span class="op">=</span> <span class="string">&quot;i saw a red box&quot;</span>;

<span class="comment">// lets create our signature.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">signature</span> <span class="op">=</span> <span class="ident">Signature</span>::<span class="ident">with_block_size</span>(<span class="number">4</span>, <span class="ident">original</span>);
<span class="comment">// this dose not do anything itself, we need to call `calculate`.</span>
<span class="ident">signature</span>.<span class="ident">calculate</span>();
<span class="comment">// now we get the indexed signature.</span>
<span class="kw">let</span> <span class="ident">indexed_signature</span> <span class="op">=</span> <span class="ident">signature</span>.<span class="ident">to_indexed</span>();
<span class="comment">// it is ready to create the `Delta`.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">delta</span> <span class="op">=</span> <span class="ident">Delta</span>::<span class="ident">new</span>(<span class="ident">indexed_signature</span>);
<span class="comment">// we can now calculate the diff.</span>
<span class="ident">delta</span>.<span class="ident">diff</span>(<span class="ident">new</span>);
<span class="kw">let</span> <span class="ident">ops</span> <span class="op">=</span> <span class="ident">delta</span>.<span class="ident">into_operations</span>();
<span class="kw">for</span> <span class="ident">op</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="ident">ops</span> {
 <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">op</span>);
}
<span class="comment">// prints</span>
<span class="comment">// + 12..15 = &quot;box&quot;</span>
<span class="comment">// - 15..-3</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">ops</span>,
    <span class="macro">vec</span><span class="macro">!</span>[
        <span class="comment">// insert the word &quot;box&quot; starting from 12 index.</span>
        <span class="ident">Operation</span>::<span class="ident">Insert</span> { <span class="ident">offset</span>: <span class="number">12</span>, <span class="ident">buffer</span>: <span class="string">b&quot;box&quot;</span>.<span class="ident">to_vec</span>() },
        <span class="comment">// from the index 15 remove 3 bytes (backword)</span>
        <span class="comment">// it is like if you are remving text with backspace!</span>
        <span class="comment">// or you can imagine it as how many bytes I need to skip from the buffer.</span>
        <span class="ident">Operation</span>::<span class="ident">Remove</span> { <span class="ident">offset</span>: <span class="number">15</span>, <span class="ident">len</span>: <span class="number">3</span> },
    ],
);
</pre></div>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Delta.html" title='rsdiff::Delta struct'>Delta</a></td><td class='docblock-short'><p>Delta between two buffers, this dose not require the original buffer, but instead it only needs
the original buffer signature, from there with the new modified buffer we can calculate the
operations needed to upgrade the original to match the new modified one.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.IndexedSignature.html" title='rsdiff::IndexedSignature struct'>IndexedSignature</a></td><td class='docblock-short'><p>A Small representation of the orignal <a href="../rsdiff/struct.Signature.html" title="Signature"><code>Signature</code></a>.
this only holds the Hash blocks calculated using <a href="../rsdiff/struct.Signature.html#method.calculate" title="Signature::calculate"><code>Signature::calculate</code></a>.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.RollingHasher.html" title='rsdiff::RollingHasher struct'>RollingHasher</a></td><td class='docblock-short'><p>An Adler-32 checksum modification with rolling operation.
it is not the same algorithm as Adler-32, but acts similarly.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Signature.html" title='rsdiff::Signature struct'>Signature</a></td><td class='docblock-short'><p>A Buffer Signature.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.Operation.html" title='rsdiff::Operation enum'>Operation</a></td><td class='docblock-short'><p>Operation to be done to upgrade from original version of the buffer to new version.</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.diff.html" title='rsdiff::diff fn'>diff</a></td><td class='docblock-short'><p>Convenience function to compute <a href="../rsdiff/struct.Delta.html" title="Delta"><code>Delta</code></a> between two buffers.
it will handle the creation of the <a href="../rsdiff/struct.Signature.html" title="Signature"><code>Signature</code></a> and the <a href="../rsdiff/struct.Delta.html" title="Delta"><code>Delta</code></a>.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.diff_with_block_size.html" title='rsdiff::diff_with_block_size fn'>diff_with_block_size</a></td><td class='docblock-short'><p>Same as <a href="../rsdiff/fn.diff.html" title="diff"><code>diff</code></a>. but with more control over the <code>block_size</code>.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "rsdiff";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>